--- squashfs4.2/squashfs-tools/Makefile
+++ squashfs4.2/squashfs-tools/Makefile
@@ -94,7 +94,6 @@
 ###############################################
 
 INCLUDEDIR = -I.
-INSTALL_DIR = /usr/local/bin
 
 MKSQUASHFS_OBJS = mksquashfs.o read_fs.o sort.o swap.o pseudo.o compressor.o
 

--- squashfs4.2/squashfs-tools/mksquashfs.c
+++ squashfs4.2/squashfs-tools/mksquashfs.c
@@ -4363,7 +4363,7 @@
 				regexec(path->name[i].preg, name, (size_t) 0,
 					NULL, 0) == 0 :
 				fnmatch(path->name[i].name, name,
-					FNM_PATHNAME|FNM_PERIOD|FNM_EXTMATCH) ==
+					FNM_PATHNAME|FNM_PERIOD|0) ==
 					 0;
 
 			if(match && path->name[i].paths == NULL) {
--- squashfs4.2/squashfs-tools/pseudo.c
+++ squashfs4.2/squashfs-tools/pseudo.c
@@ -32,6 +32,7 @@
 #include <stdlib.h>
 #include <sys/types.h>
 #include <sys/wait.h>
+#include <sys/stat.h>
 
 #include "pseudo.h"

--- squashfs4.2/squashfs-tools/unsquashfs.c
+++ squashfs4.2/squashfs-tools/unsquashfs.c
@@ -1204,7 +1204,7 @@
 			int match = use_regex ?
 				regexec(path->name[i].preg, name, (size_t) 0,
 				NULL, 0) == 0 : fnmatch(path->name[i].name,
-				name, FNM_PATHNAME|FNM_PERIOD|FNM_EXTMATCH) ==
+				name, FNM_PATHNAME|FNM_PERIOD|0) ==
 				0;
 			if(match && path->name[i].paths == NULL)
 				/*
